{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Media</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background: linear-gradient(to right, #74ebd5, #acb6e5);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        button {
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container col-md-6">
        <h2 class="mb-4">Upload Media</h2>
        <form method="post" enctype="multipart/form-data" class="text-start">
            {% csrf_token %}
            
            <label for="media_type" class="form-label">Select Media Type:</label>
            <select id="media_type" name="media_type" class="form-select mb-3" onchange="toggleMediaInput()">
                <option value="video">Video</option>
                <option value="image">Image</option>
            </select>

            <div id="video_input" class="mb-3">
                <label for="video" class="form-label">Upload Video:</label>
                <input type="file" name="video" id="video" accept="video/*" class="form-control">
            </div>

            <div id="image_input" class="mb-3" style="display: none;">
                <label for="image" class="form-label">Upload Image:</label>
                <input type="file" name="image" id="image" accept="image/*" class="form-control">
            </div>

            <label for="language" class="form-label">Select Language:</label>
            <select name="target_language" class="form-select mb-3">
                {% for code, name in languages %}
                    <option value="{{ code }}">{{ name }}</option>
                {% endfor %}
            </select>
    
            <button type="submit" class="btn btn-primary w-100">Process</button>
        </form>
    
        {% if video_url %}
            <h4 class="mt-4">Uploaded Video:</h4>
            <video width="100%" controls class="rounded shadow">
                <source src="{{ video_url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        {% endif %}

        {% if image_url %}
            <h4 class="mt-4">Uploaded Image:</h4>
            <img src="{{ image_url }}" alt="Uploaded Image" class="img-fluid rounded shadow">
        {% endif %}
    
        {% if extracted_text %}
            <h4 class="mt-4">Extracted Text:</h4>
            <p class="border rounded p-3 bg-light">{{ extracted_text }}</p>
        {% endif %}
    
        {% if cleaned_text %}
            <h4 class="mt-4">Cleaned Text:</h4>
            <p class="border rounded p-3 bg-light">{{ cleaned_text }}</p>
        {% endif %}
    
        {% if translated_text %}
            <h4 class="mt-4">Translated Text {{ target_language }}:</h4>
            <p class="border rounded p-3 bg-light">{{ translated_text }}</p>
        {% endif %}
    
        {% if audio_url %}
            <h4 class="mt-4">Generated Audio:</h4>
            <audio controls class="mt-2">
                <source src="{{ audio_url }}" type="audio/mp3">
                Your browser does not support the audio element.
            </audio>
        {% endif %}
    </div>

    <script>
        function toggleMediaInput() {
            var mediaType = document.getElementById("media_type").value;
            document.getElementById("video_input").style.display = mediaType === "video" ? "block" : "none";
            document.getElementById("image_input").style.display = mediaType === "image" ? "block" : "none";
        }
    </script>
</body>
</html>
